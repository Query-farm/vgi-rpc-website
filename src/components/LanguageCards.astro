---
const languages = [
  {
    name: 'Python',
    status: 'Reference Implementation',
    statusColor: 'text-farm-green-field',
    description: 'The original implementation with full feature support. Strict mypy typing, all transports, streaming, introspection, shared memory, and OpenTelemetry.',
    repo: 'https://github.com/Query-farm/vgi-rpc-python',
    docs: 'https://vgi-rpc-python.query.farm',
    package: 'https://pypi.org/project/vgi-rpc/',
    packageLabel: 'pip install vgi-rpc',
    icon: '&#x1F40D;',
  },
  {
    name: 'TypeScript',
    status: 'In Development',
    statusColor: 'text-farm-gold',
    description: 'TypeScript/Bun implementation with subprocess transport support. Arrow IPC serialization via apache-arrow npm package.',
    repo: 'https://github.com/Query-farm/vgi-rpc-ts',
    docs: null,
    package: null,
    packageLabel: null,
    icon: '&#x1F7E6;',
  },
  {
    name: 'Go',
    status: 'In Development',
    statusColor: 'text-farm-gold',
    description: 'Go implementation using apache/arrow-go. Subprocess transport with conformance testing against the Python reference.',
    repo: 'https://github.com/Query-farm/vgi-rpc-go',
    docs: null,
    package: null,
    packageLabel: null,
    icon: '&#x1F439;',
  },
  {
    name: 'C++',
    status: 'In Development',
    statusColor: 'text-farm-gold',
    description: 'C++20 server framework with pipe/subprocess transport. All RPC patterns (unary, producer, exchange), introspection, error propagation, client logging, and stream headers. Conformance-tested against the Python reference.',
    repo: 'https://github.com/Query-farm/vgi-rpc-cpp',
    docs: null,
    package: null,
    packageLabel: null,
    icon: '&#x2699;&#xFE0F;',
  },
];
---

<section id="languages" class="py-20 bg-farm-cream-dark/50 dark:bg-farm-dark-card/30
  border-t border-farm-cream-dark dark:border-farm-dark-border">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <h2 class="text-3xl md:text-4xl font-bold text-center
      text-farm-green-deep dark:text-farm-cream">
      Language Implementations
    </h2>
    <p class="mt-3 text-center text-lg text-farm-text-muted dark:text-farm-text-light-muted max-w-2xl mx-auto">
      One wire protocol, multiple languages. All implementations interoperate via subprocess transport.
    </p>

    <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6">
      {languages.map(lang => (
        <div class="p-6 rounded-xl bg-white dark:bg-farm-dark-card
          border border-farm-cream-dark dark:border-farm-dark-border
          hover:border-farm-green-field dark:hover:border-farm-green-field
          transition-colors">
          <div class="flex items-start justify-between">
            <div class="flex items-center gap-3">
              <span class="text-2xl" set:html={lang.icon} />
              <div>
                <h3 class="text-lg font-bold text-farm-green-deep dark:text-farm-cream">
                  {lang.name}
                </h3>
                <span class:list={['text-xs font-medium', lang.statusColor]}>
                  {lang.status}
                </span>
              </div>
            </div>
          </div>

          <p class="mt-3 text-sm text-farm-text-muted dark:text-farm-text-light-muted leading-relaxed">
            {lang.description}
          </p>

          <div class="mt-4 flex flex-wrap gap-2">
            <a href={lang.repo} target="_blank" rel="noopener noreferrer"
              class="inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium
                bg-farm-cream-dark dark:bg-farm-dark
                text-farm-text-muted dark:text-farm-text-light-muted
                hover:text-farm-green-deep dark:hover:text-farm-green-field
                transition-colors">
              GitHub
            </a>
            {lang.docs && (
              <a href={lang.docs} target="_blank" rel="noopener noreferrer"
                class="inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium
                  bg-farm-cream-dark dark:bg-farm-dark
                  text-farm-text-muted dark:text-farm-text-light-muted
                  hover:text-farm-green-deep dark:hover:text-farm-green-field
                  transition-colors">
                Docs
              </a>
            )}
            {lang.package && (
              <a href={lang.package} target="_blank" rel="noopener noreferrer"
                class="inline-flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium
                  bg-farm-cream-dark dark:bg-farm-dark
                  text-farm-text-muted dark:text-farm-text-light-muted
                  hover:text-farm-green-deep dark:hover:text-farm-green-field
                  transition-colors">
                Package
              </a>
            )}
          </div>

          {lang.packageLabel && (
            <div class="mt-3">
              <code class="text-xs px-2 py-1 rounded
                bg-farm-cream-dark dark:bg-farm-dark
                text-farm-text-muted dark:text-farm-text-light-muted">
                {lang.packageLabel}
              </code>
            </div>
          )}
        </div>
      ))}
    </div>
  </div>
</section>
